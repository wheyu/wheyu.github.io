<!doctype html><html lang="zh-CN"><head><meta charset="utf-8"/><meta name="viewport"content="width=device-width,initial-scale=1"/><title>图片水印工具</title><style>:root{--panel-bg:#fff;--page-bg:#f3f6f9;--primary:#2563eb;--muted:#6b7280}*{box-sizing:border-box}body{margin:0;height:100vh;display:flex;font-family:Inter,system-ui,Arial;background:var(--page-bg);color:#0f1724}.sidebar{width:300px;padding:18px;background:var(--panel-bg);box-shadow:2px 0 16px rgba(15,23,42,0.06);overflow:auto}.main{flex:1;display:flex;flex-direction:column;gap:8px;padding:18px;position:relative}h1{margin:0 0 12px 0;font-size:18px}label{display:block;font-size:13px;color:var(--muted);margin:8px 0 6px}input[type=range],input[type=color],input[type=text],select{width:100%;padding:6px;border-radius:6px;border:1px solid#e6eef6;background:white}#dropZone{border:2px dashed#d1d5db;border-radius:8px;padding:14px;text-align:center;color:var(--muted);cursor:pointer}#dropZone.drag{border-color:var(--primary);color:var(--primary);background:rgba(37,99,235,0.04)}button{background:var(--primary);color:white;border:0;padding:10px;border-radius:8px;cursor:pointer}.row{display:flex;gap:8px}canvas{display:block;background:#fff;position:absolute;top:1rem;left:1rem;border-radius:6px;box-shadow:0 6px 18px rgba(2,6,23,0.06)}.muted-btn{background:transparent;border:1px solid#e6eef6;color:var(--muted);padding:8px;border-radius:8px;cursor:pointer}.small{font-size:12px;color:var(--muted)}</style></head><body><div class="sidebar"><h1>图片水印工具</h1><div id="dropZone">拖入图片或点击选择</div><input id="fileInput"type="file"accept="image/*"style="display:none"/><label>水印文字（多个以逗号分隔随机选取）</label><input id="textInput"type="text"value="仅用于xxx方面,禁止外传,内部资料"/><label>字体大小(px)<span class="small"id="fontSizeLabel"></span></label><input id="fontSize"type="range"min="10"max="120"value="30"/><label>透明度<span class="small"id="opacityLabel"></span></label><input id="opacity"type="range"min="0"max="1"step="0.01"value="0.3"/><label>排列模式</label><select id="layoutMode"><option value="grid">网格排布</option><option value="random">随机排布</option></select><label>密度（网格或随机数量）<span class="small"id="densityLabel"></span></label><input id="density"type="range"min="1"max="20"value="6"/><label>角度<span class="small"id="angleLabel"></span>°</label><input id="angle"type="range"min="-90"max="90"value="-25"/><label>颜色</label><input id="color"type="color"value="#000000"/><label>纯随机颜色</label><select id="randomColor"><option value="0">关闭</option><option value="1">开启</option></select><label>曲线扭曲强度（0关闭）<span class="small"id="distortLabel"></span></label><input id="distort"type="range"min="0"max="40"value="10"/><div style="height:8px"></div><div class="row"><button id="drawBtn">生成水印</button><button id="exportBtn">导出图片</button><button id="clearBtn"class="muted-btn">清除</button></div></div><div class="main"><canvas id="canvas"></canvas></div><script>function _0x297f(_0x258683,_0x1ca5a7){const _0x4c0a4b=_0x4c0a();return _0x297f=function(_0x297f21,_0x261a24){_0x297f21=_0x297f21-0x1d4;let _0x37c853=_0x4c0a4b[_0x297f21];return _0x37c853},_0x297f(_0x258683,_0x1ca5a7)}const _0x2df04f=_0x297f;(function(_0x26444a,_0x3d5206){const _0x209fc5=_0x297f,_0x4f9e88=_0x26444a();while(!![]){try{const _0x2cd429=-parseInt(_0x209fc5(0x220))/0x1*(parseInt(_0x209fc5(0x214))/0x2)+-parseInt(_0x209fc5(0x1df))/0x3*(-parseInt(_0x209fc5(0x1e6))/0x4)+-parseInt(_0x209fc5(0x209))/0x5+-parseInt(_0x209fc5(0x20a))/0x6*(-parseInt(_0x209fc5(0x210))/0x7)+-parseInt(_0x209fc5(0x1fe))/0x8+-parseInt(_0x209fc5(0x20e))/0x9*(parseInt(_0x209fc5(0x1fc))/0xa)+parseInt(_0x209fc5(0x1ff))/0xb;if(_0x2cd429===_0x3d5206)break;else _0x4f9e88['push'](_0x4f9e88['shift']())}catch(_0xa7704d){_0x4f9e88['push'](_0x4f9e88['shift']())}}}(_0x4c0a,0xb8415));const dropZone=document[_0x2df04f(0x201)]('dropZone'),fileInput=document[_0x2df04f(0x201)]('fileInput'),canvas=document[_0x2df04f(0x201)](_0x2df04f(0x1f3)),ctx=canvas['getContext']('2d',{'alpha':!![]}),textInput=document[_0x2df04f(0x201)](_0x2df04f(0x1ee)),fontSize=document['getElementById'](_0x2df04f(0x208)),opacity=document['getElementById']('opacity'),density=document['getElementById']('density'),angle=document[_0x2df04f(0x201)](_0x2df04f(0x1ed)),color=document[_0x2df04f(0x201)]('color'),randomColor=document[_0x2df04f(0x201)](_0x2df04f(0x1ec)),distort=document['getElementById'](_0x2df04f(0x1e0)),layoutMode=document[_0x2df04f(0x201)](_0x2df04f(0x211)),fontSizeLabel=document[_0x2df04f(0x201)]('fontSizeLabel'),opacityLabel=document[_0x2df04f(0x201)](_0x2df04f(0x1eb)),angleLabel=document[_0x2df04f(0x201)](_0x2df04f(0x1d6)),densityLabel=document[_0x2df04f(0x201)]('densityLabel'),distortLabel=document['getElementById'](_0x2df04f(0x207)),drawBtn=document[_0x2df04f(0x201)](_0x2df04f(0x1dc)),exportBtn=document['getElementById'](_0x2df04f(0x204)),clearBtn=document[_0x2df04f(0x201)]('clearBtn');let img=null,displayScale=0x1;function updateLabels(){const _0x4c58a6=_0x2df04f;fontSizeLabel[_0x4c58a6(0x1ef)]=fontSize[_0x4c58a6(0x1e9)]+'px',opacityLabel[_0x4c58a6(0x1ef)]=opacity['value'],densityLabel[_0x4c58a6(0x1ef)]=density['value'],angleLabel[_0x4c58a6(0x1ef)]=angle['value'],distortLabel[_0x4c58a6(0x1ef)]=distort['value']}updateLabels(),dropZone[_0x2df04f(0x1d9)](_0x2df04f(0x1fd),()=>fileInput[_0x2df04f(0x1fd)]()),fileInput[_0x2df04f(0x1d9)]('change',_0x3baf39=>loadFile(_0x3baf39[_0x2df04f(0x217)][_0x2df04f(0x21a)]&&_0x3baf39['target']['files'][0x0])),dropZone[_0x2df04f(0x1d9)]('dragover',_0x3111cd=>{const _0x32a0c3=_0x2df04f;_0x3111cd['preventDefault'](),dropZone[_0x32a0c3(0x213)][_0x32a0c3(0x1f1)](_0x32a0c3(0x1e1))}),dropZone[_0x2df04f(0x1d9)](_0x2df04f(0x1e4),_0x257105=>{const _0x43ed1b=_0x2df04f;_0x257105[_0x43ed1b(0x20f)](),dropZone[_0x43ed1b(0x213)]['remove'](_0x43ed1b(0x1e1))}),dropZone[_0x2df04f(0x1d9)](_0x2df04f(0x1f5),_0x2e9deb=>{const _0x229c7a=_0x2df04f;_0x2e9deb[_0x229c7a(0x20f)](),dropZone[_0x229c7a(0x213)][_0x229c7a(0x1e3)](_0x229c7a(0x1e1));const _0xd34021=_0x2e9deb[_0x229c7a(0x1da)]['files']&&_0x2e9deb[_0x229c7a(0x1da)]['files'][0x0];loadFile(_0xd34021)});function loadFile(_0x20d176){const _0xa56e22=_0x2df04f;if(!_0x20d176)return;const _0xb5e3f=new FileReader();_0xb5e3f[_0xa56e22(0x1f6)]=_0x4458ef=>{const _0x2ef676=_0xa56e22,_0x345c80=new Image();_0x345c80[_0x2ef676(0x1f6)]=()=>{img=_0x345c80,fitCanvas(),draw()},_0x345c80[_0x2ef676(0x1e8)]=_0x4458ef[_0x2ef676(0x217)][_0x2ef676(0x205)]},_0xb5e3f['readAsDataURL'](_0x20d176)}function fitCanvas(){const _0x56a780=_0x2df04f;canvas[_0x56a780(0x1f9)]=img[_0x56a780(0x1f9)],canvas['height']=img['height']}function _0x4c0a(){const _0x13420a=['cos','drawBtn','fillStyle','rotate','666795ImWQEN','distort','drag','createObjectURL','remove','dragleave','height','8LWFrmE','createElement','src','value','innerHeight','opacityLabel','randomColor','angle','textInput','textContent','change','add','filter','canvas','getContext','drop','onload','fillText','请先上传图片','width','floor','createImageData','10Zagnrz','click','9062768kkfGLa','38122282wDyfYm','rgb(','getElementById','data','middle','exportBtn','result','length','distortLabel','fontSize','3886785ToVlsP','618ySxDYr','putImageData','download','textBaseline','9988794CXighw','preventDefault','78253GmCCEs','layoutMode','revokeObjectURL','classList','1522LtMtVh','random','restore','target','round','scale','files','href','split','map','trim','resize','1691pisuvC','center','max','font','globalAlpha','drawImage','clearRect','watermarked.png','angleLabel','forEach','translate','addEventListener','dataTransfer'];_0x4c0a=function(){return _0x13420a};return _0x4c0a()}function pickRandomText(){const _0x5e6fb0=_0x2df04f,_0x13a134=textInput[_0x5e6fb0(0x1e9)][_0x5e6fb0(0x21c)](',')[_0x5e6fb0(0x21d)](_0x282279=>_0x282279[_0x5e6fb0(0x21e)]())[_0x5e6fb0(0x1f2)](_0x3a442c=>_0x3a442c);if(_0x13a134[_0x5e6fb0(0x206)]===0x0)return'禁止外传';return _0x13a134[Math[_0x5e6fb0(0x1fa)](Math['random']()*_0x13a134['length'])]}function draw(){const _0x5b501d=_0x2df04f;if(!img){ctx[_0x5b501d(0x1d4)](0x0,0x0,canvas[_0x5b501d(0x1f9)],canvas[_0x5b501d(0x1e5)]);return}const _0x45d5a2=canvas['width'],_0xa598af=canvas['height'];ctx['clearRect'](0x0,0x0,_0x45d5a2,_0xa598af),ctx[_0x5b501d(0x225)](img,0x0,0x0,_0x45d5a2,_0xa598af);const _0x4eb627=document[_0x5b501d(0x1e7)](_0x5b501d(0x1f3));_0x4eb627[_0x5b501d(0x1f9)]=_0x45d5a2,_0x4eb627[_0x5b501d(0x1e5)]=_0xa598af;const _0x504e6e=_0x4eb627[_0x5b501d(0x1f4)]('2d'),_0x210c6b=Number(density[_0x5b501d(0x1e9)]),_0x3b7392=layoutMode['value']===_0x5b501d(0x215),_0x52aef3=_0x3b7392?_0x210c6b*_0x210c6b:_0x210c6b*_0x210c6b,_0x3b5e3e=Number(fontSize[_0x5b501d(0x1e9)])*displayScale,_0x24a4e9=Number(angle[_0x5b501d(0x1e9)])*Math['PI']/0xb4,_0x15ee91=Number(opacity['value']),_0x5a1099=color[_0x5b501d(0x1e9)],_0x35ff3e=randomColor['value']==='1';_0x504e6e['textAlign']='center',_0x504e6e[_0x5b501d(0x20d)]=_0x5b501d(0x203),_0x504e6e[_0x5b501d(0x223)]=_0x3b5e3e+'px\x20sans-serif';for(let _0x53a4da=0x0;_0x53a4da<_0x52aef3;_0x53a4da++){const _0x49fc0c=pickRandomText();let _0x5792ad,_0x17dfc0;if(_0x3b7392)_0x5792ad=Math[_0x5b501d(0x215)]()*_0x45d5a2,_0x17dfc0=Math[_0x5b501d(0x215)]()*_0xa598af;else{const _0x1740e2=Math[_0x5b501d(0x1fa)](_0x53a4da/_0x210c6b),_0x14ff92=_0x53a4da%_0x210c6b;_0x5792ad=(_0x14ff92+0.5)*(_0x45d5a2/_0x210c6b),_0x17dfc0=(_0x1740e2+0.5)*(_0xa598af/_0x210c6b)}_0x504e6e['save'](),_0x504e6e[_0x5b501d(0x1d8)](_0x5792ad,_0x17dfc0),_0x504e6e[_0x5b501d(0x1de)](_0x24a4e9+(_0x3b7392?Math['random']()*0.3-0.15:0x0)),_0x504e6e['scale'](0x1+(Math[_0x5b501d(0x215)]()*0.1-0.05),0x1+(Math[_0x5b501d(0x215)]()*0.1-0.05)),_0x504e6e[_0x5b501d(0x224)]=_0x15ee91;const _0x13aae7=_0x35ff3e?_0x5b501d(0x200)+(Math[_0x5b501d(0x215)]()*0xf0|0x0)+','+(Math[_0x5b501d(0x215)]()*0xf0|0x0)+','+(Math[_0x5b501d(0x215)]()*0xf0|0x0)+')':_0x5a1099;_0x504e6e[_0x5b501d(0x1dd)]=_0x13aae7,_0x504e6e['fillText'](_0x49fc0c,0x0,0x0),_0x504e6e[_0x5b501d(0x216)]()}applyDistort(_0x504e6e,_0x45d5a2,_0xa598af,Number(distort['value'])),ctx[_0x5b501d(0x225)](_0x4eb627,0x0,0x0)}function applyDistort(_0x593050,_0x25c9ae,_0x25ffef,_0x2ab830){const _0x31bb11=_0x2df04f;if(_0x2ab830<=0x0)return;const _0x27440b=_0x593050['getImageData'](0x0,0x0,_0x25c9ae,_0x25ffef),_0xafafdb=_0x593050[_0x31bb11(0x1fb)](_0x25c9ae,_0x25ffef),_0x2661a2=_0x27440b[_0x31bb11(0x202)],_0x3c5493=_0xafafdb[_0x31bb11(0x202)],_0x10cb14=0x2*Math['PI']/0xc8,_0x52aaa6=0x2*Math['PI']/0x82;for(let _0x37517d=0x0;_0x37517d<_0x25ffef;_0x37517d++){for(let _0x3569ed=0x0;_0x3569ed<_0x25c9ae;_0x3569ed++){const _0x2c484c=Math['sin'](_0x37517d*_0x10cb14)+Math[_0x31bb11(0x1db)](_0x3569ed*_0x52aaa6)*0.6,_0x1ab7e7=Math[_0x31bb11(0x1db)](_0x3569ed*_0x10cb14)*0.4+Math['sin'](_0x37517d*_0x52aaa6),_0x5c0c=Math['round'](_0x3569ed+_0x2c484c*_0x2ab830*0.7),_0x3d18eb=Math[_0x31bb11(0x218)](_0x37517d+_0x1ab7e7*_0x2ab830*0.7),_0x2b1c72=(_0x37517d*_0x25c9ae+_0x3569ed)*0x4;if(_0x5c0c>=0x0&&_0x5c0c<_0x25c9ae&&_0x3d18eb>=0x0&&_0x3d18eb<_0x25ffef){const _0x13d750=(_0x3d18eb*_0x25c9ae+_0x5c0c)*0x4;_0x3c5493[_0x2b1c72]=_0x2661a2[_0x13d750],_0x3c5493[_0x2b1c72+0x1]=_0x2661a2[_0x13d750+0x1],_0x3c5493[_0x2b1c72+0x2]=_0x2661a2[_0x13d750+0x2],_0x3c5493[_0x2b1c72+0x3]=_0x2661a2[_0x13d750+0x3]}}}_0x593050[_0x31bb11(0x20b)](_0xafafdb,0x0,0x0)}exportBtn[_0x2df04f(0x1d9)](_0x2df04f(0x1fd),()=>{const _0xf9c59=_0x2df04f;if(!img){alert(_0xf9c59(0x1f8));return}const _0x100880=img[_0xf9c59(0x1f9)],_0x208d80=img['height'],_0x345355=document[_0xf9c59(0x1e7)]('canvas');_0x345355[_0xf9c59(0x1f9)]=_0x100880,_0x345355[_0xf9c59(0x1e5)]=_0x208d80;const _0x369f71=_0x345355['getContext']('2d');_0x369f71['drawImage'](img,0x0,0x0);const _0x32be9f=document[_0xf9c59(0x1e7)](_0xf9c59(0x1f3));_0x32be9f['width']=_0x100880,_0x32be9f[_0xf9c59(0x1e5)]=_0x208d80;const _0x4a64e0=_0x32be9f['getContext']('2d'),_0x35cdd=Number(density[_0xf9c59(0x1e9)]),_0x3ec011=layoutMode[_0xf9c59(0x1e9)]==='random',_0x579972=_0x35cdd*_0x35cdd,_0x22fc98=Number(angle['value'])*Math['PI']/0xb4,_0x2279f5=Number(fontSize[_0xf9c59(0x1e9)]),_0x1111f7=Number(opacity[_0xf9c59(0x1e9)]),_0x4776dc=randomColor[_0xf9c59(0x1e9)]==='1',_0x226ec4=color[_0xf9c59(0x1e9)];_0x4a64e0['textAlign']=_0xf9c59(0x221),_0x4a64e0[_0xf9c59(0x20d)]=_0xf9c59(0x203),_0x4a64e0[_0xf9c59(0x223)]=_0x2279f5+'px\x20sans-serif';for(let _0x1ec877=0x0;_0x1ec877<_0x579972;_0x1ec877++){const _0x44dd29=pickRandomText();let _0x1fec2d,_0x4f3d30;if(_0x3ec011)_0x1fec2d=Math[_0xf9c59(0x215)]()*_0x100880,_0x4f3d30=Math[_0xf9c59(0x215)]()*_0x208d80;else{const _0x43802b=Math[_0xf9c59(0x1fa)](_0x1ec877/_0x35cdd),_0x73e073=_0x1ec877%_0x35cdd;_0x1fec2d=(_0x73e073+0.5)*(_0x100880/_0x35cdd),_0x4f3d30=(_0x43802b+0.5)*(_0x208d80/_0x35cdd)}_0x4a64e0['save'](),_0x4a64e0[_0xf9c59(0x1d8)](_0x1fec2d,_0x4f3d30),_0x4a64e0[_0xf9c59(0x1de)](_0x22fc98+(_0x3ec011?Math[_0xf9c59(0x215)]()*0.3-0.15:0x0)),_0x4a64e0[_0xf9c59(0x219)](0x1+(Math['random']()*0.12-0.06),0x1+(Math[_0xf9c59(0x215)]()*0.12-0.06)),_0x4a64e0[_0xf9c59(0x224)]=_0x1111f7;const _0x479733=_0x4776dc?_0xf9c59(0x200)+(Math[_0xf9c59(0x215)]()*0xf0|0x0)+','+(Math[_0xf9c59(0x215)]()*0xf0|0x0)+','+(Math['random']()*0xf0|0x0)+')':_0x226ec4;_0x4a64e0[_0xf9c59(0x1dd)]=_0x479733,_0x4a64e0[_0xf9c59(0x1f7)](_0x44dd29,0x0,0x0),_0x4a64e0[_0xf9c59(0x216)]()}applyDistort(_0x4a64e0,_0x100880,_0x208d80,Number(distort[_0xf9c59(0x1e9)])),_0x369f71[_0xf9c59(0x225)](_0x32be9f,0x0,0x0),_0x345355['toBlob'](_0xf35644=>{const _0x16e1bb=_0xf9c59,_0x424f3b=URL[_0x16e1bb(0x1e2)](_0xf35644),_0x2eeac1=document['createElement']('a');_0x2eeac1[_0x16e1bb(0x21b)]=_0x424f3b,_0x2eeac1[_0x16e1bb(0x20c)]=_0x16e1bb(0x1d5),_0x2eeac1['click'](),URL[_0x16e1bb(0x212)](_0x424f3b)},'image/png')}),drawBtn[_0x2df04f(0x1d9)]('click',()=>{updateLabels(),draw()}),['input',_0x2df04f(0x1f0)][_0x2df04f(0x1d7)](_0x1f4b99=>{const _0x365771=_0x2df04f;[textInput,fontSize,opacity,density,angle,color,randomColor,distort,layoutMode][_0x365771(0x1d7)](_0x5b10f6=>{const _0x52b866=_0x365771;_0x5b10f6[_0x52b866(0x1d9)](_0x1f4b99,()=>{updateLabels(),draw()})})}),clearBtn[_0x2df04f(0x1d9)](_0x2df04f(0x1fd),()=>{const _0xe71d3c=_0x2df04f;img=null,canvas['width']=Math[_0xe71d3c(0x222)](0x258,window['innerWidth']-0x168-0x28),canvas[_0xe71d3c(0x1e5)]=Math[_0xe71d3c(0x222)](0x12c,window[_0xe71d3c(0x1ea)]-0x3c),ctx[_0xe71d3c(0x1d4)](0x0,0x0,canvas['width'],canvas[_0xe71d3c(0x1e5)])}),window['addEventListener'](_0x2df04f(0x21f),()=>{img&&(fitCanvas(),draw())}),canvas[_0x2df04f(0x1f9)]=Math[_0x2df04f(0x222)](0x258,window['innerWidth']-0x168-0x28),canvas[_0x2df04f(0x1e5)]=Math[_0x2df04f(0x222)](0x12c,window[_0x2df04f(0x1ea)]-0x3c),draw();</script></body></html>